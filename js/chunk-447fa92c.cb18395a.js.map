{"version":3,"sources":["webpack:///./src/components/AdminList.vue?5031","webpack:///src/components/AdminList.vue","webpack:///./src/components/AdminList.vue?6c30","webpack:///./src/components/AdminList.vue","webpack:///./src/api/admin.js","webpack:///./src/components/AdminList.vue?454b"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","_l","tweet","key","id","attrs","user","avatar","_s","name","account","_f","createdAt","description","on","$event","deleteTweet","staticRenderFns","mixins","data","tweets","methods","created","fetchApiData","component","getToken","localStorage","getItem","getAllTweets","apiHelper","get","headers","Authorization","getAllUsers","delete"],"mappings":"yHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,eAAe,CAACF,EAAG,SAAS,CAACJ,EAAIO,GAAG,UAAUP,EAAIQ,GAAIR,EAAU,QAAE,SAASS,GAAO,OAAOL,EAAG,MAAM,CAACM,IAAID,EAAME,GAAGL,YAAY,WAAW,CAACF,EAAG,MAAM,CAACQ,MAAM,CAAC,IAAMH,EAAMI,KAAKC,UAAUV,EAAG,MAAM,CAACA,EAAG,MAAM,CAACE,YAAY,gBAAgB,CAACF,EAAG,MAAM,CAACE,YAAY,QAAQ,CAACN,EAAIO,GAAGP,EAAIe,GAAGN,EAAMI,KAAKG,SAASZ,EAAG,MAAM,CAACE,YAAY,WAAW,CAACN,EAAIO,GAAG,KAAKP,EAAIe,GAAGN,EAAMI,KAAKI,SAAS,IAAIjB,EAAIe,GAAGf,EAAIkB,GAAG,UAAPlB,CAAkBS,EAAMU,YAAY,SAASf,EAAG,MAAM,CAACE,YAAY,eAAe,CAACN,EAAIO,GAAG,IAAIP,EAAIe,GAAGN,EAAMW,aAAa,SAAShB,EAAG,MAAM,CAACE,YAAY,SAASe,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOtB,EAAIuB,YAAYd,EAAME,OAAO,CAACP,EAAG,MAAM,CAACQ,MAAM,CAAC,MAAQ,KAAK,OAAS,KAAK,QAAU,YAAY,KAAO,OAAO,MAAQ,+BAA+B,CAACR,EAAG,OAAO,CAACQ,MAAM,CAAC,EAAI,gjBAAgjB,KAAO,uBAAsB,IACz6CY,EAAkB,G,gHCoHtB,GACER,KAAM,YACNS,OAAQ,CAAC,EAAX,MACEC,KAHF,WAII,MAAO,CACLC,OAAQ,KAGZC,QAAS,CAEP,aAFJ,WAEA,yLAEA,sBAFA,UAEA,EAFA,OAKA,SAEA,oBAPA,sBAQA,UARA,OAYA,qCAEA,0BACA,0BACA,kDAhBA,qDAoBA,yCACA,aACA,eACA,iBAvBA,6DA2BI,YA7BJ,SA6BA,0LAGA,sBAHA,UAGA,EAHA,OAKA,OALA,sBAMA,UANA,OASA,iBATA,mDAWA,iCACA,aACA,eACA,sBAdA,6DAmBEC,QAxDF,WAyDI,OAAJ,OAAI,CAAJ,MACI,OAAJ,OAAI,CAAJ,cACI5B,KAAK6B,iBChL0U,I,wBCQ/UC,EAAY,eACd,EACAhC,EACAyB,GACA,EACA,KACA,WACA,MAIa,aAAAO,E,6CCnBf,gBAEMC,EAAW,kBAAMC,aAAaC,QAAQ,UAE7B,QACbC,aADa,WAEX,OAAOC,OAAUC,IAAV,YAA2B,CAChCC,QAAS,CAAEC,cAAe,UAAF,OAAYP,SAGxCQ,YANa,WAOX,OAAOJ,OAAUC,IAAV,kBAAiC,CACtCC,QAAS,CAAEC,cAAe,UAAF,OAAYP,SAGxCT,YAXa,SAWDZ,GACV,OAAOyB,OAAUK,OAAV,2BAAqC9B,GAAM,CAChD2B,QAAS,CAAEC,cAAe,UAAF,OAAYP,W,6DCjB1C","file":"js/chunk-447fa92c.cb18395a.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"tweets-list\"},[_c('header',[_vm._v(\"推文清單\")]),_vm._l((_vm.tweets),function(tweet){return _c('div',{key:tweet.id,staticClass:\"content\"},[_c('img',{attrs:{\"src\":tweet.user.avatar}}),_c('div',[_c('div',{staticClass:\"name-account\"},[_c('div',{staticClass:\"name\"},[_vm._v(_vm._s(tweet.user.name))]),_c('div',{staticClass:\"account\"},[_vm._v(\" @\"+_vm._s(tweet.user.account)+\"・\"+_vm._s(_vm._f(\"fromNow\")(tweet.createdAt))+\" \")])]),_c('div',{staticClass:\"description\"},[_vm._v(\" \"+_vm._s(tweet.description)+\" \")])]),_c('div',{staticClass:\"delete\",on:{\"click\":function($event){return _vm.deleteTweet(tweet.id)}}},[_c('svg',{attrs:{\"width\":\"24\",\"height\":\"24\",\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"xmlns\":\"http://www.w3.org/2000/svg\"}},[_c('path',{attrs:{\"d\":\"M13.414 12.0001L19.207 6.20712C19.597 5.81712 19.597 5.18412 19.207 4.79312C18.817 4.40212 18.184 4.40312 17.793 4.79312L12 10.5861L6.207 4.79312C5.817 4.40312 5.184 4.40312 4.793 4.79312C4.402 5.18312 4.403 5.81612 4.793 6.20712L10.586 12.0001L4.793 17.7931C4.403 18.1831 4.403 18.8161 4.793 19.2071C4.988 19.4021 5.243 19.5001 5.5 19.5001C5.757 19.5001 6.012 19.4021 6.207 19.2071L12 13.4141L17.793 19.2071C17.988 19.4021 18.243 19.5001 18.5 19.5001C18.757 19.5001 19.012 19.4021 19.207 19.2071C19.597 18.8171 19.597 18.1841 19.207 17.7931L13.414 12.0001Z\",\"fill\":\"#657786\"}})])])])})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"tweets-list\">\r\n    <header>推文清單</header>\r\n    <div class=\"content\" v-for=\"tweet in tweets\" :key=\"tweet.id\">\r\n      <img :src=\"tweet.user.avatar\" />\r\n      <div>\r\n        <div class=\"name-account\">\r\n          <div class=\"name\">{{ tweet.user.name }}</div>\r\n          <div class=\"account\">\r\n            @{{ tweet.user.account }}・{{ tweet.createdAt | fromNow }}\r\n          </div>\r\n        </div>\r\n        <div class=\"description\">\r\n          {{ tweet.description }}\r\n        </div>\r\n      </div>\r\n      <div class=\"delete\" @click=\"deleteTweet(tweet.id)\">\r\n        <svg\r\n          width=\"24\"\r\n          height=\"24\"\r\n          viewBox=\"0 0 24 24\"\r\n          fill=\"none\"\r\n          xmlns=\"http://www.w3.org/2000/svg\"\r\n        >\r\n          <path\r\n            d=\"M13.414 12.0001L19.207 6.20712C19.597 5.81712 19.597 5.18412 19.207 4.79312C18.817 4.40212 18.184 4.40312 17.793 4.79312L12 10.5861L6.207 4.79312C5.817 4.40312 5.184 4.40312 4.793 4.79312C4.402 5.18312 4.403 5.81612 4.793 6.20712L10.586 12.0001L4.793 17.7931C4.403 18.1831 4.403 18.8161 4.793 19.2071C4.988 19.4021 5.243 19.5001 5.5 19.5001C5.757 19.5001 6.012 19.4021 6.207 19.2071L12 13.4141L17.793 19.2071C17.988 19.4021 18.243 19.5001 18.5 19.5001C18.757 19.5001 19.012 19.4021 19.207 19.2071C19.597 18.8171 19.597 18.1841 19.207 17.7931L13.414 12.0001Z\"\r\n            fill=\"#657786\"\r\n          />\r\n        </svg>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<style lang=\"scss\" scoped>\r\nsvg,\r\nimg {\r\n  cursor: initial;\r\n}\r\n\r\n.tweets-list {\r\n  flex-basis: 1062px;\r\n  height: 100vh;\r\n  overflow: clip scroll;\r\n  font-family: \"Noto Sans TC\", sans-serif;\r\n  font-style: normal;\r\n  font-weight: bold;\r\n  color: #1c1c1c;\r\n\r\n  * {\r\n    box-sizing: border-box;\r\n  }\r\n\r\n  header {\r\n    border-block: 1px solid #e6ecf0;\r\n    border-left: 1px solid #e6ecf0;\r\n    font-weight: 900;\r\n    font-size: 18px;\r\n    padding: 15px 0px 15px 25px;\r\n  }\r\n  .content {\r\n    position: relative;\r\n    padding: 13px 15px;\r\n    border-bottom: 1px solid #e6ecf0;\r\n    border-left: 1px solid #e6ecf0;\r\n    display: flex;\r\n    word-break: break-word;\r\n    overflow-wrap: break-word;\r\n\r\n    img {\r\n      width: 50px;\r\n      height: 50px;\r\n      background: #c4c4c4;\r\n      border-radius: 50%;\r\n      margin-right: 15px;\r\n    }\r\n    .name-account {\r\n      font-size: 15px;\r\n      display: flex;\r\n      .name {\r\n        font-weight: 700;\r\n        margin: auto 5px auto 0px;\r\n      }\r\n      .account {\r\n        font-weight: 500;\r\n        color: #657786;\r\n      }\r\n    }\r\n    .description {\r\n      font-weight: 500;\r\n      font-size: 15px;\r\n    }\r\n    .delete {\r\n      position: absolute;\r\n      top: 15px;\r\n      right: 5px;\r\n      cursor: pointer;\r\n    }\r\n  }\r\n}\r\n\r\n@media all and (max-width: 768px) {\r\n  .tweets-list {\r\n    height: calc(100vh - 31px);\r\n  }\r\n}\r\n</style>\r\n\r\n<script>\r\nimport { fromNowFilter } from \"./../utils/mixins\";\r\nimport {\r\n  Toast,\r\n  keepUnauthorizedOut,\r\n  roleAccessControl,\r\n} from \"./../utils/helpers\";\r\nimport admin from \"./../api/admin\";\r\n\r\nexport default {\r\n  name: \"AdminList\",\r\n  mixins: [fromNowFilter],\r\n  data() {\r\n    return {\r\n      tweets: [],\r\n    };\r\n  },\r\n  methods: {\r\n    // API\r\n    async fetchApiData() {\r\n      try {\r\n        const response = await admin.getAllTweets();\r\n\r\n        // 取得 API 請求後的資料\r\n        const { data } = response;\r\n\r\n        if (response.statusText !== \"OK\") {\r\n          throw new Error();\r\n        }\r\n\r\n        // 載入 tweets 資料\r\n        this.tweets = [...data.allTweets];\r\n        // description 僅能看見前 50 字元\r\n        this.tweets.map((tweet) => {\r\n          if (tweet.description.length > 50) {\r\n            tweet.description = tweet.description.slice(0, 50) + \"...\";\r\n          }\r\n        });\r\n      } catch (error) {\r\n        console.log(\"error\", error.response || error);\r\n        Toast.fire({\r\n          icon: \"warning\",\r\n          title: \"無法載入資料\",\r\n        });\r\n      }\r\n    },\r\n    async deleteTweet(id) {\r\n      // 刪除資料\r\n      try {\r\n        const response = await admin.deleteTweet(id);\r\n\r\n        if (!response.data) {\r\n          throw new Error();\r\n        }\r\n\r\n        this.fetchApiData();\r\n      } catch (error) {\r\n        console.log(error.response || error);\r\n        Toast.fire({\r\n          icon: \"warning\",\r\n          title: \"伺服器忙碌，請稍後再試\",\r\n        });\r\n      }\r\n    },\r\n  },\r\n  created() {\r\n    keepUnauthorizedOut(this);\r\n    roleAccessControl(this, \"10550\");\r\n    this.fetchApiData();\r\n  },\r\n};\r\n</script>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdminList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdminList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AdminList.vue?vue&type=template&id=c9c4a4d6&scoped=true&\"\nimport script from \"./AdminList.vue?vue&type=script&lang=js&\"\nexport * from \"./AdminList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AdminList.vue?vue&type=style&index=0&id=c9c4a4d6&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"c9c4a4d6\",\n  null\n  \n)\n\nexport default component.exports","import { apiHelper } from \"../utils/helpers\";\r\n\r\nconst getToken = () => localStorage.getItem(\"token\");\r\n\r\nexport default {\r\n  getAllTweets() {\r\n    return apiHelper.get(`api/admin`, {\r\n      headers: { Authorization: `Bearer ${getToken()}` },\r\n    });\r\n  },\r\n  getAllUsers() {\r\n    return apiHelper.get(`api/admin/users`, {\r\n      headers: { Authorization: `Bearer ${getToken()}` },\r\n    });\r\n  },\r\n  deleteTweet(id) {\r\n    return apiHelper.delete(`api/admin/tweets/${id}`, {\r\n      headers: { Authorization: `Bearer ${getToken()}` },\r\n    });\r\n  },\r\n};\r\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdminList.vue?vue&type=style&index=0&id=c9c4a4d6&lang=scss&scoped=true&\""],"sourceRoot":""}